# Errors of moneywise dec 2025

## error 1
app file name was b.moneywise which isn't URL friendly so changed to just moneywise

## error 2
The directory moneywise has files that might be overwritten:

  db
  exports
  main
  Project Documents
  screens

Try using a new directory name, or moving these files.

**SOL:**
1st create expo app and install dependencies as soon as new app folder is created if not this error is just a hassle

Create and intall dependencies
    npx create-expo-app .
    npx expo install expo-sqlite


## error 3

on creating db.ts and inputting this code

```ts
// db/db.ts
import * as SQLite from 'expo-sqlite';
export const db = SQLite.openDatabase('moneywise.db');
```

Property 'openDatabase' does not exist on type 'typeof import("e:/1. Abhishek/0. Apps/moneywise/node_modules/expo-sqlite/build/index")'. Did you mean 'openDatabaseSync'?ts(2551)
SQLiteDatabase.d.ts(322, 25): 'openDatabaseSync' is declared here.

**SOL:**
Why this error happens (important context)

Expo SQLite changed its API in recent SDKs.

Old API (deprecated)
SQLite.openDatabase(...)

New API (current)
SQLite.openDatabaseSync(...)
SQLite.openDatabaseAsync(...)


  What you SHOULD use (recommended)
  For DB initialization & migrations, you want deterministic, ordered execution.
  ‚úÖ Use openDatabaseSync

‚úÖ Correct db.ts (FIX)
```ts
// db/db.ts
import * as SQLite from 'expo-sqlite';

export const db = SQLite.openDatabaseSync('moneywise.db');
```

# error 4: Cannot find module './001_init.sql?raw' or its corresponding type declarations.ts(2307)

```ts
// db/migrations/index.ts
import init from './001_init.sql?raw';
import addTags from './002_add_tags.sql?raw';
import addIndexes from './003_add_indexes.sql?raw';

export const MIGRATION_SQL: Record<string, string> = {
  '001_init.sql': init,
  '002_add_tags.sql': addTags,
  '003_add_indexes.sql': addIndexes,
}; 
```
index.ts in db/migrations folder

eroor on all aimport lines
Cannot find module './001_init.sql?raw' or its corresponding type declarations.ts(2307)

## Sol: TypeScript + bundler capability issue
This is a very real, very common problem ‚Äî and you did nothing wrong.
What you‚Äôre hitting is not a SQLite issue, it‚Äôs a TypeScript + bundler capability issue.

Let‚Äôs clear this cleanly and choose the right solution for Expo.

### Why this error is happening
```ts
import init from './001_init.sql?raw';
```
  ‚ùå This syntax works in Vite / Webpack with raw-loader
  ‚ùå Expo does NOT support ?raw imports
  ‚ùå TypeScript has no idea how to type .sql files

So VS Code is correct when it says:

Cannot find module './001_init.sql?raw'

This is not configurable in Expo without ejecting ‚Äî and you should not eject.


### Correct mental model (important)

Expo apps do not bundle arbitrary text files as modules.

So this approach:
.sql file ‚Üí import as string

‚ùå is not supported in Expo-managed workflow

‚úÖ The RIGHT way to do migrations in Expo (industry-correct)

There are two valid approaches.
I‚Äôll explain both ‚Äî then tell you which one to choose.

## OPTION A (RECOMMENDED) ‚Äî Store SQL as strings in TS

This is the cleanest, safest, Expo-native solution.

Why this is the best choice
  Works 100% in Expo
  Type-safe
  No bundler hacks
  Easy to version-control
  Easy to debug
  Zero runtime file I/O

üìå Most production Expo apps do this

How to fix your project (step-by-step)
### 1Ô∏è‚É£ Keep .sql files for documentation ONLY (optional)

You may keep:
db/migrations/001_init.sql

‚Ä¶but do not import them.


### 2Ô∏è‚É£ Create db/migrations/sql.ts

```ts
// db/migrations/sql.ts
export const SQL_001_INIT = `
CREATE TABLE accounts (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  bankName TEXT NOT NULL,
  type TEXT,
  currency TEXT,
  openingBalance REAL,
  createdAt TEXT NOT NULL
);

CREATE TABLE categories (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  type TEXT,
  color TEXT,
  icon TEXT,
  createdAt TEXT NOT NULL
);

CREATE TABLE transactions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount REAL NOT NULL,
  transactionType TEXT NOT NULL,
  categoryId INTEGER,
  accountId INTEGER,
  timestamp TEXT NOT NULL,
  note TEXT,
  createdAt TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS appMeta (
  key TEXT PRIMARY KEY,
  value TEXT
);
`;
```

### 3Ô∏è‚É£ Map migrations properly
```ts
// db/migrations/index.ts
import { SQL_001_INIT } from './sql';

export const MIGRATION_SQL: Record<string, string> = {
  '001_init.sql': SQL_001_INIT,
};
```

‚úÖ No errors
‚úÖ Fully supported
‚úÖ Expo-safe

## OPTION B ‚Äî Load .sql files via FileSystem (NOT recommended now)

You could:
  Put .sql files in assets/
  Read them using expo-file-system

But:
  More code
  Async file reads
  Harder debugging
  Zero benefit right now

üìå This is only useful if:

You have huge SQL scripts
Or user-provided SQL (you don‚Äôt)

Why I strongly recommend OPTION A for YOU

Because:
  Your migrations are small
  Your schema is stable
  You want clarity, not cleverness
  You‚Äôre learning & building correctly
  You already made the right architectural decisions ‚Äî this just aligns tooling.

Important reassurance
  You did not design this wrong.
  Your mistake was assuming:

‚ÄúIf it works on web bundlers, it should work in Expo‚Äù

That‚Äôs a reasonable assumption ‚Äî but Expo is stricter by design.


## What to do RIGHT NOW (action list)
  ‚ùå Delete ?raw imports
  ‚úÖ Create db/migrations/sql.ts
  ‚úÖ Move SQL into template strings
  ‚úÖ Update index.ts to map strings

After that:
  Error will disappear
  Migrations will run
  DB init will work

Final checkpoint before moving on

When done, your structure should look like:

db/
 ‚îú‚îÄ‚îÄ migrations/
 ‚îÇ    ‚îú‚îÄ‚îÄ sql.ts          ‚úÖ
 ‚îÇ    ‚îî‚îÄ‚îÄ index.ts        ‚úÖ
 ‚îú‚îÄ‚îÄ initDatabase.ts
 ‚îú‚îÄ‚îÄ db.ts
 ‚îî‚îÄ‚îÄ schemaVersion.ts

Next step (when ready)

Say:
‚ÄúMigration import issue fixed, ready to verify DB.‚Äù

Then we‚Äôll:
  Verify tables exist
  Insert test data
  Confirm schemaVersion is stored
  Move to CSV export